import{r as d,b as v,c as a,a as e,h,w as k,i as f,F as j,k as w,d as b,o,e as p,t as l,n as C}from"./index-BI6IAewv.js";const D={class:"flex"},N={class:"text-center"},B={key:0,class:"py-4 text-center"},E={key:1,class:"mt-5 rounded-xl"},$={key:0,class:"p-4 text-gray-500 bg-white border border-gray-300 rounded-md"},G={key:1,class:"space-y-4"},M={class:"flex items-center justify-between"},S={class:"font-semibold text-blue-600"},I={class:"text-gray-700"},P={key:0,class:"mt-1 text-sm italic text-gray-500"},z={class:"text-right"},A={key:0,class:"mt-2"},F=["onClick"],J={class:"flex justify-between mt-6"},V=["disabled"],L=["disabled"],R=10,q={__name:"MyAppointments",setup(T){const u=d([]),c=d(!0),i=d(0),m=d(!1),r=async()=>{c.value=!0;try{const s=await b.get(`/appointments/my-appointment?page=${i.value}&size=${R}`);u.value=s.data.content,m.value=s.data.last}catch(s){console.error("Gagal memuat janji",s),alert(" Gagal membuat janji")}finally{c.value=!1}},y=async s=>{if(confirm("Yakin ingin membatalkan janji ini?"))try{await b.patch(`/appointments/${s}/cancel`),r()}catch{alert("Gagal membatalkan janji.")}},x=s=>new Date(s).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),g=s=>({PENDING:"bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-sm",CONFIRMED:"bg-green-100 text-green-700 px-2 py-1 rounded text-sm",REJECTED:"bg-red-100 text-red-700 px-2 py-1 rounded text-sm"})[s]||"bg-gray-100 text-gray-700 px-2 py-1 rounded text-sm";return v(r),(s,n)=>{const _=f("router-link");return o(),a("div",null,[e("div",D,[n[3]||(n[3]=e("h1",{class:"w-4/5 mb-4 text-2xl font-bold"},"Janji Saya",-1)),e("div",N,[h(_,{to:"/appointments/create",class:"inline-block px-2 py-1 font-semibold text-white bg-blue-500 rounded-xl"},{default:k(()=>n[2]||(n[2]=[e("span",null,"Buat Janji Baru",-1)])),_:1,__:[2]})])]),c.value?(o(),a("div",B,n[4]||(n[4]=[e("span",{class:"inline-block w-6 h-6 border-4 border-blue-400 rounded-full animate-spin border-t-transparent"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Memuat daftar janji...",-1)]))):(o(),a("div",E,[u.value.length===0?(o(),a("div",$," Belum ada janji. ")):(o(),a("ul",G,[(o(!0),a(j,null,w(u.value,t=>(o(),a("li",{key:t.id,class:"p-4 bg-white border rounded shadow-sm"},[e("div",M,[e("div",null,[e("p",S,l(x(t.appointmentDate)),1),e("p",I,"Pukul "+l(t.appointmentTime)+" selama "+l(t.durationMinute)+" menit",1),t.description?(o(),a("p",P,'"'+l(t.description)+'"',1)):p("",!0)]),e("div",z,[e("span",{class:C(g(t.status))},l(t.status),3),t.status==="PENDING"?(o(),a("div",A,[e("button",{onClick:O=>y(t.id),class:"px-2 py-1 text-sm text-white bg-red-600 border border-red-800 rounded-sm hover:underline"}," Batalkan ",8,F)])):p("",!0)])])]))),128))])),e("div",J,[e("button",{disabled:i.value===0,onClick:n[0]||(n[0]=t=>i.value--&&r()),class:"text-blue-600 hover:underline disabled:text-gray-400"}," ← Sebelumnya ",8,V),e("button",{disabled:m.value,onClick:n[1]||(n[1]=t=>i.value++&&r()),class:"text-blue-600 hover:underline disabled:text-gray-400"}," Selanjutnya → ",8,L)])]))])}}};export{q as default};
