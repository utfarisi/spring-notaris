import{r as d,b as v,c as a,a as e,h,w as k,i as f,F as w,k as j,e as b,t as l,n as C,d as p,o}from"./index-BPdYYkL8.js";const D={class:"flex"},N={class:"text-center"},B={key:0,class:"text-center py-4"},E={key:1,class:"mt-5 rounded-xl"},$={key:0,class:"text-gray-500 p-4 bg-white border border-gray-300 rounded-md"},M={key:1,class:"space-y-4"},S={class:"flex justify-between items-center"},G={class:"font-semibold text-blue-600"},I={class:"text-gray-700"},P={key:0,class:"text-sm text-gray-500 mt-1 italic"},z={class:"text-right"},A={key:0,class:"mt-2"},F=["onClick"],J={class:"flex justify-between mt-6"},V=["disabled"],L=["disabled"],R=10,q={__name:"MyAppointments",setup(T){const u=d([]),c=d(!0),i=d(0),m=d(!1),r=async()=>{c.value=!0;try{const s=await p.get(`/appointments/my-appointment?page=${i.value}&size=${R}`);u.value=s.data.content,m.value=s.data.last}catch(s){console.error("Gagal memuat janji",s)}finally{c.value=!1}},y=async s=>{if(confirm("Yakin ingin membatalkan janji ini?"))try{await p.patch(`/appointments/${s}/cancel`),r()}catch{alert("Gagal membatalkan janji.")}},x=s=>new Date(s).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),_=s=>({PENDING:"bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-sm",CONFIRMED:"bg-green-100 text-green-700 px-2 py-1 rounded text-sm",REJECTED:"bg-red-100 text-red-700 px-2 py-1 rounded text-sm"})[s]||"bg-gray-100 text-gray-700 px-2 py-1 rounded text-sm";return v(r),(s,n)=>{const g=f("router-link");return o(),a("div",null,[e("div",D,[n[3]||(n[3]=e("h1",{class:"text-2xl font-bold mb-4 w-4/5"},"Janji Saya",-1)),e("div",N,[h(g,{to:"/appointments/create",class:"bg-blue-500 px-2 py-1 rounded-xl text-white font-semibold inline-block"},{default:k(()=>n[2]||(n[2]=[e("span",null,"Buat Janji Baru",-1)])),_:1,__:[2]})])]),c.value?(o(),a("div",B,n[4]||(n[4]=[e("span",{class:"animate-spin h-6 w-6 border-4 border-blue-400 border-t-transparent rounded-full inline-block"},null,-1),e("p",{class:"text-sm text-gray-500 mt-2"},"Memuat daftar janji...",-1)]))):(o(),a("div",E,[u.value.length===0?(o(),a("div",$," Belum ada janji. ")):(o(),a("ul",M,[(o(!0),a(w,null,j(u.value,t=>(o(),a("li",{key:t.id,class:"p-4 border rounded shadow-sm bg-white"},[e("div",S,[e("div",null,[e("p",G,l(x(t.appointmentDate)),1),e("p",I,"Pukul "+l(t.appointmentTime)+" selama "+l(t.durationMinute)+" menit",1),t.description?(o(),a("p",P,'"'+l(t.description)+'"',1)):b("",!0)]),e("div",z,[e("span",{class:C(_(t.status))},l(t.status),3),t.status==="PENDING"?(o(),a("div",A,[e("button",{onClick:O=>y(t.id),class:"text-sm text-white hover:underline border border-red-800 px-2 py-1 rounded-sm bg-red-600"}," Batalkan ",8,F)])):b("",!0)])])]))),128))])),e("div",J,[e("button",{disabled:i.value===0,onClick:n[0]||(n[0]=t=>i.value--&&r()),class:"text-blue-600 hover:underline disabled:text-gray-400"}," ← Sebelumnya ",8,V),e("button",{disabled:m.value,onClick:n[1]||(n[1]=t=>i.value++&&r()),class:"text-blue-600 hover:underline disabled:text-gray-400"}," Selanjutnya → ",8,L)])]))])}}};export{q as default};
