import{_ as B,r,b as D,c as l,a as t,t as a,f as P,B as N,e as d,F as T,j as h,n as M,d as _,u as C,o}from"./index-CxQJsHfq.js";const S={class:"p-6"},V={key:0,class:"py-4 text-center"},j={key:1,class:"px-6 py-4 bg-white rounded-lg"},F={class:"mb-4"},R={class:"flex flex-col"},E={class:"flex items-start gap-x-2"},K={class:"flex-1"},L={class:"flex items-start gap-x-2"},$={class:"flex-1"},z={class:"flex items-start gap-x-2"},G={class:"flex-1"},H={class:"flex items-start gap-x-2"},U={class:"flex-1"},q={class:"p-4 mb-6 bg-gray-100 rounded"},J={class:"uppercase"},O={class:"mt-2"},Q=["href"],W=["src"],X={key:1,class:"mt-2 text-sm text-gray-700"},Y={class:"flex items-center justify-between mt-6"},Z={key:0},tt={__name:"InvoicePaymentAdminView",setup(st){const k=r("https://spring-notaris-production.up.railway.app"),w=C(),e=r({}),i=r(!0),u=async()=>{i.value=!0;try{const{data:n}=await _.get(`/invoices/${w.params.id}/show`);e.value=n}catch{}finally{i.value=!1}},I=async()=>{if(confirm("Tandai invoice ini sebagai lunas?"))try{await _.post(`invoices/${e.value.id}/mark-paid`),alert("Status pembayaran diperbarui."),u()}catch{alert("Gagal memperbarui status.")}};D(()=>{u()});const A=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(n);return(n,s)=>{var m,p,v,c,f,b,y,x,g;return o(),l("div",S,[s[14]||(s[14]=t("h1",{class:"mb-4 text-xl font-bold"},"Detail Pembayaran Invoice",-1)),i.value?(o(),l("div",V,s[0]||(s[0]=[t("span",{class:"inline-block w-6 h-6 border-4 border-blue-400 rounded-full animate-spin border-t-transparent"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Memuat daftar janji...",-1)]))):(o(),l("div",j,[t("div",F,[t("div",R,[t("div",E,[s[1]||(s[1]=t("p",{class:"w-2/5 font-semibold text-left"},"Nomor Invoice",-1)),s[2]||(s[2]=t("p",null,":",-1)),t("p",K,a((m=e.value)==null?void 0:m.invoiceNumber),1)]),t("div",L,[s[3]||(s[3]=t("p",{class:"w-2/5 font-semibold text-left"},"Tanggal",-1)),s[4]||(s[4]=t("p",null,":",-1)),t("p",$,a(P(N)((p=e.value)==null?void 0:p.invoiceDate)),1)]),t("div",z,[s[5]||(s[5]=t("p",{class:"w-2/5 font-semibold text-left"},"Klien",-1)),s[6]||(s[6]=t("p",null,":",-1)),t("p",G,a((c=(v=e.value)==null?void 0:v.customer)==null?void 0:c.fullname),1)]),t("div",H,[s[7]||(s[7]=t("p",{class:"w-2/5 font-semibold text-left"},"Total",-1)),s[8]||(s[8]=t("p",null,":",-1)),t("p",U,a(A((f=e.value)==null?void 0:f.totalAmount)),1)])])]),t("div",q,[t("p",null,[s[9]||(s[9]=t("strong",null,"Metode Pembayaran:",-1)),t("span",J,a(((b=e.value)==null?void 0:b.paymentMethod)||"Belum dipilih"),1)]),((y=e.value)==null?void 0:y.paymentMethod)==="BANK_TRANSFER"?(o(),l(T,{key:0},[t("p",null,[s[10]||(s[10]=t("strong",null,"Bank:",-1)),h(" "+a(e.value.bankCode),1)]),t("div",O,[s[11]||(s[11]=t("p",{class:"mb-1 font-medium"},"Bukti Transfer:",-1)),t("a",{href:(x=e.value)==null?void 0:x.evident,target:"_blank"},[t("img",{src:k.value+"/"+e.value.evident,alt:"Bukti Transfer",class:"w-64 border rounded"},null,8,W)],8,Q)])],64)):d("",!0),((g=e.value)==null?void 0:g.paymentMethod)==="CASH"?(o(),l("div",X,s[12]||(s[12]=[t("p",null,"Pembayaran akan dilakukan langsung di kantor.",-1)]))):d("",!0)]),t("div",Y,[t("div",null,[t("p",null,[s[13]||(s[13]=t("strong",null,"Status:",-1)),t("span",{class:M({"text-green-600 font-bold":e.value.status==="PAID","text-red-600 font-bold":e.value.status!=="PAID"})},a(e.value.status==="PAID"?"Lunas":"Belum Dibayar"),3)])]),e.value.status!=="PAID"&&e.value.paymentMethod?(o(),l("div",Z,[t("button",{onClick:I,class:"btn-primary"},"Tandai sebagai Lunas")])):d("",!0)])]))])}}},at=B(tt,[["__scopeId","data-v-434db186"]]);export{at as default};
