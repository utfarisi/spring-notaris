import{_ as I,r as b,c,o as r,a as t,j as f,t as d,D as _,E as B,h as N,e as h,s as T,v as P,F as C,k as D,n as A,d as S,b as $,z as M}from"./index-DCE9A8Tx.js";const R={class:"mb-4"},E={class:"mb-4"},U={class:"pt-4 mb-4 border-t"},F={__name:"CashPaymentReceipt",props:{invoice:{type:Object,required:!0}},setup(i){const m=b(null),y=()=>{const n=m.value.innerHTML,e=window.open("","","width=800,height=600");e.document.write(`
    <html>
      <head>
        <title>Cetak Tanda Terima</title>
        <style>
          body { font-family: sans-serif; padding: 20px; }
          .text-center { text-align: center; }
          .border-t { border-top: 1px solid #ccc; margin-top: 20px; padding-top: 10px; }
          @media print {
            .no-print {
              display: none !important;
            }
          }
        </style>
      </head>
      <body>${n}</body>
    </html>
  `),e.document.close(),e.focus(),e.print(),e.close()},p=n=>_(new Date(n),"dd MMMM yyyy",{locale:void 0}),g=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(n);return(n,e)=>(r(),c("div",{ref_key:"printArea",ref:m,class:"max-w-xl p-8 mx-auto text-black bg-white shadow"},[e[6]||(e[6]=t("div",{class:"mb-6 text-center"},[t("h1",{class:"text-2xl font-bold"},"TANDA TERIMA PEMBAYARAN TUNAI"),t("p",{class:"text-gray-700"},"Harap dibawa saat melakukan pembayaran di kantor")],-1)),t("div",R,[t("p",null,[e[0]||(e[0]=t("strong",null,"Nomor Invoice:",-1)),f(" "+d(i.invoice.invoiceNumber),1)]),t("p",null,[e[1]||(e[1]=t("strong",null,"Tanggal Invoice:",-1)),f(" "+d(p(i.invoice.invoiceDate)),1)]),t("p",null,[e[2]||(e[2]=t("strong",null,"Jatuh Tempo:",-1)),f(" "+d(p(i.invoice.dueDate)),1)])]),t("div",E,[t("p",null,[e[3]||(e[3]=t("strong",null,"Nama Klien:",-1)),f(" "+d(i.invoice.customer.fullname),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"Transaksi:",-1)),f(" "+d(i.invoice.description),1)])]),t("div",U,[t("p",null,[e[5]||(e[5]=t("strong",null,"Total yang harus dibayar:",-1)),f(" Rp "+d(g(i.invoice.totalAmount)),1)])]),e[7]||(e[7]=t("div",{class:"p-4 text-sm text-gray-700 bg-gray-100 rounded"},[t("p",null,[t("strong",null,"Silakan lakukan pembayaran tunai ke alamat berikut:")]),t("p",null,"Kantor Notaris ABC"),t("p",null,"Jl. Mawar No. 123, BSD City, Tangerang Selatan"),t("p",null,"Jam Operasional: Senin - Jumat, 09.00 - 17.00 WIB"),t("p",null,"Telp: 021-12345678")],-1)),t("div",{class:"mt-8 text-center"},[t("button",{onClick:y,class:"btn-primary no-print"},"Cetak Tanda Terima")])],512))}},j=I(F,[["__scopeId","data-v-6061642d"]]),H={class:"p-4 space-y-2 text-sm border border-yellow-300 rounded bg-yellow-50"},J={class:"mt-4 max-h-[200px] overflow-y-auto border-t pt-3"},K={__name:"PaymentCash",props:{invoice:{type:Object,required:!0}},setup(i){return(m,y)=>(r(),c("div",H,[y[0]||(y[0]=B('<h3 class="text-base font-semibold text-yellow-800" data-v-69128541>Pembayaran Tunai</h3><p data-v-69128541>Silakan lakukan pembayaran tunai ke kantor berikut:</p><ul class="space-y-1 text-gray-700" data-v-69128541><li data-v-69128541><strong data-v-69128541>Nama Kantor:</strong> Notaris ABC</li><li data-v-69128541><strong data-v-69128541>Alamat:</strong> Jl. Mawar No. 123, BSD City, Tangsel</li><li data-v-69128541><strong data-v-69128541>Jam:</strong> Senin - Jumat, 09.00 - 17.00 WIB</li><li data-v-69128541><strong data-v-69128541>Telp:</strong> (021) 12345678</li></ul>',3)),t("div",J,[N(j,{invoice:i.invoice},null,8,["invoice"])])]))}},L=I(K,[["__scopeId","data-v-69128541"]]),V={class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},O={class:"relative w-full max-w-md p-6 bg-white rounded"},z={class:"mt-4"},q={key:0,class:"mt-4"},W={class:"space-y-2"},G=["onClick"],Y=["src"],Q={class:"font-semibold"},X={class:"text-sm text-gray-600"},Z={class:"mt-4"},tt={key:1,class:"mt-4"},et={__name:"InvoicePaymentModal",props:{invoice:Object},emits:["close","paid"],setup(i,{emit:m}){const y=i,p=m,g=b("http://localhost:8080"),n=b(""),e=b(""),x=b(null),w=[{code:"BCA",name:"Bank BCA",accountNumber:"1234567890",logo:g.value+"/images/bca-logo.png"},{code:"MANDIRI",name:"Bank Mandiri",accountNumber:"9876543210",logo:g.value+"/images/bank-mandiri-logo.png"},{code:"BSI",name:"Bank Syariah Indonesia (BSI)",accountNumber:"5566778899",logo:g.value+"/images/bsi-logo.png"}],k=()=>p("close"),s=u=>{x.value=u.target.files[0]},a=async()=>{if(!n.value){alert("Harap pilih metode pembayaran.");return}const u=new FormData;if(u.append("paymentMethod",n.value),n.value==="BANK_TRANSFER"){if(!e.value||!x.value){alert("Harap pilih bank dan upload bukti transfer.");return}u.append("bankCode",e.value),u.append("proof",x.value)}else n.value;try{console.log("Payload yang dikirim (FormData):",Object.fromEntries(u.entries())),await S.post(`/invoices/${y.invoice.id}/pay`,u,{headers:{"Content-Type":"multipart/form-data"}}),alert("Pembayaran berhasil dikirim."),p("paid"),k()}catch(o){console.error("Error saat mengirim pembayaran:",o.response?o.response.data:o.message),alert("Gagal melakukan pembayaran. Silakan coba lagi.")}},l=u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(u);return(u,o)=>(r(),c("div",V,[t("div",O,[o[5]||(o[5]=t("h2",{class:"mb-4 text-xl font-bold"},"Pembayaran Invoice",-1)),t("p",null,"No: "+d(i.invoice.invoiceNumber),1),t("p",null,"Total: "+d(l(i.invoice.totalAmount)),1),t("div",z,[o[2]||(o[2]=t("label",{class:"block mb-1 font-medium"},"Metode Pembayaran:",-1)),T(t("select",{"onUpdate:modelValue":o[0]||(o[0]=v=>n.value=v),class:"input"},o[1]||(o[1]=[t("option",{disabled:"",value:""},"-- Pilih --",-1),t("option",{value:"CASH"},"Cash",-1),t("option",{value:"BANK_TRANSFER"},"Transfer Bank",-1)]),512),[[P,n.value]])]),n.value==="BANK_TRANSFER"?(r(),c("div",q,[o[4]||(o[4]=t("label",{class:"block mb-1 font-medium"},"Pilih Bank Tujuan:",-1)),t("div",W,[(r(),c(C,null,D(w,v=>t("div",{key:v.code,class:A(["flex items-center p-2 border rounded cursor-pointer hover:bg-gray-100",{"ring-2 ring-blue-500":e.value===v.code}]),onClick:yt=>e.value=v.code},[t("img",{src:v.logo,alt:"logo bank",class:"w-10 h-10 mr-4"},null,8,Y),t("div",null,[t("p",Q,d(v.name),1),t("p",X,"No Rek: "+d(v.accountNumber),1)])],10,G)),64))]),t("div",Z,[o[3]||(o[3]=t("label",{class:"block mb-1 font-medium"},"Upload Bukti Transfer:",-1)),t("input",{type:"file",onChange:s,class:"input"},null,32)])])):h("",!0),n.value==="CASH"?(r(),c("div",tt,[N(L,{invoice:i.invoice},null,8,["invoice"])])):h("",!0),t("div",{class:"flex justify-end gap-2 mt-6"},[t("button",{onClick:k,class:"btn-secondary"},"Batal"),t("button",{onClick:a,class:"btn-primary"},"Bayar")]),t("button",{onClick:k,class:"absolute text-gray-500 top-2 right-2 hover:text-black"},"âœ•")])]))}},at=I(et,[["__scopeId","data-v-4df83cc4"]]),nt={class:"p-6"},st={key:0,class:"py-4 text-center"},ot={key:0,class:"p-4 text-gray-500 bg-white border border-gray-100 rounded-md"},lt={class:"mb-2"},it={style:{display:"flex","align-items":"baseline"}},rt={style:{display:"flex","align-items":"baseline"}},dt={style:{display:"flex","align-items":"baseline"}},ut={style:{display:"flex","align-items":"baseline"}},ct=["onClick"],mt={key:2,class:"text-sm font-semibold text-green-600"},pt={__name:"InvoiceListCustomer",setup(i){const m=b({content:[],empty:!0}),y=b(!0),p=b(null),g=async()=>{try{y.value=!0;const s=await S.get("/invoices/my-invoice");m.value=s.data,m.value.empty=!s.data.content||s.data.content.length===0}catch(s){console.error("Error fetching invoices:",s)}finally{y.value=!1}},n=()=>{const s=p.value.id,a=m.value.content.findIndex(l=>l.id===s);a!==-1&&(m.value.content[a].paymentStatus="ISSUED"),p.value=null};$(g);const e=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(s),x={ISSUED:"Masih Draft",UNPAID:"Belum Dibayar",PAID:"Sudah Dibayar",CANCELLED:"Dibatalkan"},w=s=>x[s]||s,k=s=>{switch(s){case"PAID":return"px-2 py-1 ml-1 font-semibold text-white bg-green-700 rounded-sm";case"ISSUED":return"px-2 py-1 ml-1 font-semibold text-white bg-yellow-600 rounded-sm";case"UNPAID":return"px-2 py-1 ml-1 font-semibold text-white bg-red-600 rounded-sm";default:return"px-2 py-1 ml-1 font-semibold text-white bg-gray-500 rounded-sm"}};return(s,a)=>(r(),c("div",nt,[a[6]||(a[6]=t("h1",{class:"mb-4 text-2xl font-bold"},"Daftar Invoice",-1)),y.value?(r(),c("div",st,a[1]||(a[1]=[t("span",{class:"inline-block w-6 h-6 border-4 border-blue-400 rounded-full animate-spin border-t-transparent"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Memuat data ...",-1)]))):h("",!0),(r(!0),c(C,null,D(m.value.content,l=>{var u;return r(),c("div",{key:l.id,class:"flex flex-col justify-between gap-2 p-4 mb-4 bg-white border border-gray-300 rounded shadow sm:flex-row sm:items-center"},[(u=m.value)!=null&&u.empty?(r(),c("div",ot,"Tidak ada invoice.")):h("",!0),t("div",lt,[t("div",it,[a[2]||(a[2]=t("strong",{style:{width:"100px"}},"No. Invoice",-1)),t("span",null,": "+d(l.invoiceNumber),1)]),t("div",rt,[a[3]||(a[3]=t("strong",{style:{width:"100px"}},"Tanggal",-1)),t("span",null,": "+d(l.invoiceDate),1)]),t("div",dt,[a[4]||(a[4]=t("strong",{style:{width:"100px"}},"Total",-1)),t("span",null,": "+d(e(l==null?void 0:l.totalAmount)),1)]),t("div",ut,[a[5]||(a[5]=t("strong",{style:{width:"100px"}},"Status",-1)),t("span",{class:A(k(l.status||"UNPAID"))},d(w(l.status||"UNPAID")),3)])]),l.status!=="PAID"?(r(),c("button",{key:1,onClick:o=>p.value=l,class:"btn-primary"},"Pilih Metode Bayar",8,ct)):(r(),c("span",mt,"Sudah Dibayar"))])}),128)),p.value?(r(),M(at,{key:1,invoice:p.value,onClose:a[0]||(a[0]=l=>p.value=null),onPaid:n},null,8,["invoice"])):h("",!0)]))}},bt=I(pt,[["__scopeId","data-v-36258399"]]);export{bt as default};
