import{_ as B,r as u,b as D,c as l,a as t,e as i,t as a,f as P,B as N,F as T,j as h,n as M,d as _,u as C,o}from"./index-BHdmYk1o.js";const S={class:"max-w-3xl p-6 mx-auto bg-white rounded shadow"},V={key:0,class:"py-4 text-center"},j={class:"mb-4"},F={class:"flex flex-col"},R={class:"flex items-start gap-x-2"},E={class:"flex-1"},K={class:"flex items-start gap-x-2"},L={class:"flex-1"},$={class:"flex items-start gap-x-2"},z={class:"flex-1"},G={class:"flex items-start gap-x-2"},H={class:"flex-1"},U={class:"p-4 mb-6 bg-gray-100 rounded"},q={class:"uppercase"},J={class:"mt-2"},O=["href"],Q=["src"],W={key:1,class:"mt-2 text-sm text-gray-700"},X={class:"flex items-center justify-between mt-6"},Y={key:0},Z={__name:"InvoicePaymentAdminView",setup(tt){const k=u("https://spring-notaris-production.up.railway.app"),w=C(),e=u({}),r=u(!0),d=async()=>{r.value=!0;try{const{data:n}=await _.get(`/invoices/${w.params.id}/show`);e.value=n}catch{}finally{r.value=!1}},I=async()=>{if(confirm("Tandai invoice ini sebagai lunas?"))try{await _.post(`invoices/${e.value.id}/mark-paid`),alert("Status pembayaran diperbarui."),d()}catch{alert("Gagal memperbarui status.")}};D(()=>{d()});const A=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(n);return(n,s)=>{var m,p,v,c,f,b,x,y,g;return o(),l("div",S,[s[14]||(s[14]=t("h1",{class:"mb-4 text-xl font-bold"},"Detail Pembayaran Invoice",-1)),r.value?(o(),l("div",V,s[0]||(s[0]=[t("span",{class:"inline-block w-6 h-6 border-4 border-blue-400 rounded-full animate-spin border-t-transparent"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Memuat daftar janji...",-1)]))):i("",!0),t("div",j,[t("div",F,[t("div",R,[s[1]||(s[1]=t("p",{class:"w-2/5 font-semibold text-left"},"Nomor Invoice",-1)),s[2]||(s[2]=t("p",null,":",-1)),t("p",E,a((m=e.value)==null?void 0:m.invoiceNumber),1)]),t("div",K,[s[3]||(s[3]=t("p",{class:"w-2/5 font-semibold text-left"},"Tanggal",-1)),s[4]||(s[4]=t("p",null,":",-1)),t("p",L,a(P(N)((p=e.value)==null?void 0:p.invoiceDate)),1)]),t("div",$,[s[5]||(s[5]=t("p",{class:"w-2/5 font-semibold text-left"},"Klien",-1)),s[6]||(s[6]=t("p",null,":",-1)),t("p",z,a((c=(v=e.value)==null?void 0:v.customer)==null?void 0:c.fullname),1)]),t("div",G,[s[7]||(s[7]=t("p",{class:"w-2/5 font-semibold text-left"},"Total",-1)),s[8]||(s[8]=t("p",null,":",-1)),t("p",H,a(A((f=e.value)==null?void 0:f.totalAmount)),1)])])]),t("div",U,[t("p",null,[s[9]||(s[9]=t("strong",null,"Metode Pembayaran:",-1)),t("span",q,a(((b=e.value)==null?void 0:b.paymentMethod)||"Belum dipilih"),1)]),((x=e.value)==null?void 0:x.paymentMethod)==="BANK_TRANSFER"?(o(),l(T,{key:0},[t("p",null,[s[10]||(s[10]=t("strong",null,"Bank:",-1)),h(" "+a(e.value.bankCode),1)]),t("div",J,[s[11]||(s[11]=t("p",{class:"mb-1 font-medium"},"Bukti Transfer:",-1)),t("a",{href:(y=e.value)==null?void 0:y.evident,target:"_blank"},[t("img",{src:k.value+"/"+e.value.evident,alt:"Bukti Transfer",class:"w-64 border rounded"},null,8,Q)],8,O)])],64)):i("",!0),((g=e.value)==null?void 0:g.paymentMethod)==="CASH"?(o(),l("div",W,s[12]||(s[12]=[t("p",null,"Pembayaran akan dilakukan langsung di kantor.",-1)]))):i("",!0)]),t("div",X,[t("div",null,[t("p",null,[s[13]||(s[13]=t("strong",null,"Status:",-1)),t("span",{class:M({"text-green-600 font-bold":e.value.status==="PAID","text-red-600 font-bold":e.value.status!=="PAID"})},a(e.value.status==="PAID"?"Lunas":"Belum Dibayar"),3)])]),e.value.status!=="PAID"&&e.value.paymentMethod?(o(),l("div",Y,[t("button",{onClick:I,class:"btn-primary"},"Tandai sebagai Lunas")])):i("",!0)])])}}},et=B(Z,[["__scopeId","data-v-b20ca8bc"]]);export{et as default};
