import{_ as D,r as u,b as _,c as l,a as t,e as r,t as s,f as P,B as N,F as T,j as M,n as C,d as k,u as S,o}from"./index-Dgr_zgK7.js";const V={class:"max-w-3xl p-6 mx-auto bg-white rounded shadow"},j={key:0,class:"py-4 text-center"},F={class:"mb-4"},R={class:"grid grid-cols-[auto_10px_1fr] gap-x-2"},E={class:"p-4 mb-6 bg-gray-100 rounded"},K={class:"uppercase"},L={class:"mt-2"},$=["href"],z=["src"],G={key:1,class:"mt-2 text-sm text-gray-700"},H={class:"flex items-center justify-between mt-6"},U={key:0},h={__name:"InvoicePaymentAdminView",setup(q){const I=u("http://localhost:8085"),w=S(),a=u({}),i=u(!0),d=async()=>{i.value=!0;try{const{data:n}=await k.get(`/invoices/${w.params.id}/show`);a.value=n}catch{}finally{i.value=!1}},A=async()=>{if(confirm("Tandai invoice ini sebagai lunas?"))try{await k.post(`invoices/${a.value.id}/mark-paid`),alert("Status pembayaran diperbarui."),d()}catch{alert("Gagal memperbarui status.")}};_(()=>{d()});const B=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(n);return(n,e)=>{var m,p,v,f,b,y,c,g,x;return o(),l("div",V,[e[14]||(e[14]=t("h1",{class:"mb-4 text-xl font-bold"},"Detail Pembayaran Invoice",-1)),i.value?(o(),l("div",j,e[0]||(e[0]=[t("span",{class:"inline-block w-6 h-6 border-4 border-blue-400 rounded-full animate-spin border-t-transparent"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Memuat daftar janji...",-1)]))):r("",!0),t("div",F,[t("div",R,[e[1]||(e[1]=t("p",{class:"font-semibold text-left"},"Nomor Invoice",-1)),e[2]||(e[2]=t("p",null,":",-1)),t("p",null,s((m=a.value)==null?void 0:m.invoiceNumber),1),e[3]||(e[3]=t("p",{class:"font-semibold text-left"},"Tanggal",-1)),e[4]||(e[4]=t("p",null,":",-1)),t("p",null,s(P(N)((p=a.value)==null?void 0:p.invoiceDate)),1),e[5]||(e[5]=t("p",{class:"font-semibold text-left"},"Klien",-1)),e[6]||(e[6]=t("p",null,":",-1)),t("p",null,s((f=(v=a.value)==null?void 0:v.customer)==null?void 0:f.fullname),1),e[7]||(e[7]=t("p",{class:"font-semibold text-left"},"Total",-1)),e[8]||(e[8]=t("p",null,":",-1)),t("p",null,s(B((b=a.value)==null?void 0:b.totalAmount)),1)])]),t("div",E,[t("p",null,[e[9]||(e[9]=t("strong",null,"Metode Pembayaran:",-1)),t("span",K,s(((y=a.value)==null?void 0:y.paymentMethod)||"Belum dipilih"),1)]),((c=a.value)==null?void 0:c.paymentMethod)==="BANK_TRANSFER"?(o(),l(T,{key:0},[t("p",null,[e[10]||(e[10]=t("strong",null,"Bank:",-1)),M(" "+s(a.value.bankCode),1)]),t("div",L,[e[11]||(e[11]=t("p",{class:"mb-1 font-medium"},"Bukti Transfer:",-1)),t("a",{href:(g=a.value)==null?void 0:g.evident,target:"_blank"},[t("img",{src:I.value+"/"+a.value.evident,alt:"Bukti Transfer",class:"w-64 border rounded"},null,8,z)],8,$)])],64)):r("",!0),((x=a.value)==null?void 0:x.paymentMethod)==="CASH"?(o(),l("div",G,e[12]||(e[12]=[t("p",null,"Pembayaran akan dilakukan langsung di kantor.",-1)]))):r("",!0)]),t("div",H,[t("div",null,[t("p",null,[e[13]||(e[13]=t("strong",null,"Status:",-1)),t("span",{class:C({"text-green-600 font-bold":a.value.status==="PAID","text-red-600 font-bold":a.value.status!=="PAID"})},s(a.value.status==="PAID"?"Lunas":"Belum Dibayar"),3)])]),a.value.status!=="PAID"&&a.value.paymentMethod?(o(),l("div",U,[t("button",{onClick:A,class:"btn-primary"},"Tandai sebagai Lunas")])):r("",!0)])])}}},O=D(h,[["__scopeId","data-v-f779b8f1"]]);export{O as default};
