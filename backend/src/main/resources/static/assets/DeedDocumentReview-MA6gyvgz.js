import{h as w,u as C,r as m,b as D,d as c,c as l,a as e,i as k,w as E,f as $,j as R,k as u,t as o,F as V,l as P,o as r,n as N,e as x}from"./index-Cwgy1Y1I.js";import{_ as A}from"./PreviewDocument.vue_vue_type_script_setup_true_lang-B6-dUMpB.js";const T={class:"max-w-3xl mx-auto p-6 bg-white rounded shadow"},U={class:"flex gap-3 items-center mb-4"},B={class:"mb-4"},J={class:"w-full table-auto border"},I={class:"px-3 py-2"},L={class:"px-3 py-2"},O={class:"px-3 py-2"},S=["onClick"],F={class:"px-3 py-2 flex space-x-2"},M=["href"],j=["onClick"],z=["onClick"],H=w({__name:"DeedDocumentReview",setup(G){const g="https://api.aplikasianda.com",v=C(),f=v.params.id,i=m({}),d=m([]),p=m("");D(async()=>{const[n,t]=await Promise.all([c.get(`/deeds/${f}`),c.get(`/deeds/${f}/documents`)]);i.value=n.data,d.value=t.data});const b=async(n,t)=>{try{await c.put(`/deed-documents/${n}/verify`,{status:t});const a=d.value.findIndex(s=>s.id===n);a!==-1&&(d.value[a].status=t)}catch(a){console.error("Verifikasi gagal",a)}},y=n=>{const t=`${g}/${n.name}`;p.value=t},h=n=>({APPROVED:"text-green-600 font-semibold",REJECTED:"text-red-600 font-semibold",UPLOADED:"text-blue-600 font-semibold",MISSING:"text-gray-500 italic"})[n];return(n,t)=>{const a=R("router-link");return r(),l("div",T,[e("div",U,[t[2]||(t[2]=e("h2",{class:"text-2xl font-bold mb-4 w-4/5"},"Verifikasi Dokumen Akta",-1)),k(a,{to:`/deeds/${$(v).params.id}`,class:"bg-black px-2 py-2 rounded-md text-white text-sm"},{default:E(()=>t[1]||(t[1]=[u(" Kembali ")])),_:1,__:[1]},8,["to"])]),e("div",B,[e("p",null,[t[3]||(t[3]=e("strong",null,"Nomor:",-1)),u(" "+o(i.value.number),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Judul:",-1)),u(" "+o(i.value.title),1)]),e("p",null,[t[5]||(t[5]=e("strong",null,"Jenis:",-1)),u(" "+o(i.value.deedType),1)]),e("p",null,[t[6]||(t[6]=e("strong",null,"Tanggal:",-1)),u(" "+o(i.value.deedDate),1)])]),e("table",J,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-100 text-left"},[e("th",{class:"px-3 py-2"},"Nama Dokumen"),e("th",{class:"px-3 py-2"},"Status"),e("th",{class:"px-3 py-2"},"Image"),e("th",{class:"px-3 py-2"},"Aksi")])],-1)),e("tbody",null,[(r(!0),l(V,null,P(d.value,s=>(r(),l("tr",{key:s.name,class:"border-t"},[e("td",I,o(s.name),1),e("td",L,[e("span",{class:N(h(s.status))},o(s.status),3)]),e("td",O,[e("button",{onClick:_=>y(s),class:"text-blue-600 underline"},"Lihat",8,S)]),e("td",F,[s.fileUrl?(r(),l("a",{key:0,href:s.fileUrl,target:"_blank",class:"text-blue-600 hover:underline"}," Lihat ",8,M)):x("",!0),s.status!=="APPROVED"?(r(),l("button",{key:1,onClick:_=>b(s.id,"APPROVED"),class:"text-green-600 hover:underline"}," ✔ ",8,j)):x("",!0),s.status!=="REJECTED"?(r(),l("button",{key:2,onClick:_=>b(s.id,"REJECTED"),class:"text-red-600 hover:underline"}," ✘ ",8,z)):x("",!0)])]))),128))])]),k(A,{"preview-url":p.value,onClose:t[0]||(t[0]=s=>p.value="")},null,8,["preview-url"])])}}});export{H as default};
