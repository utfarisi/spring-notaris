import{r as b,b as S,c as u,o,a as t,s as m,e as p,x as v,t as r,v as A,F as w,k as g,h as U,q as V,d as _,y as J,z as x,f as I}from"./index-CHNKtIZn.js";import{_ as B}from"./CustomSelectModal.vue_vue_type_script_setup_true_lang-XcFzqrwj.js";const N={key:0,class:"text-red-600"},M=["value"],$={key:0,class:"text-red-600"},D={key:0,class:"text-red-600"},E={key:0,class:"text-red-600"},L={key:0,class:"text-red-600"},T={__name:"DeedAdminForm",setup(c){const s=b({deed_number:"",deed_type:"",title:"",deed_date:"",customer_id:"",description:""}),a=b({deed_number:"",deed_type:"",title:"",deed_date:"",customer_id:"",description:""}),d={JUAL_BELI:"Jual Beli",HAK_MILIK:"Sertifikat Hak Milik",PERJANJIAN:"Perjanjian"},n=b([]),f=async()=>{try{const i=await _.get("/clients/all");n.value=i.data}catch(i){console.error("Gagal memuat klien",i)}},y=async()=>{var i;try{await _.post("/deeds",s.value),alert("Akta berhasil disimpan!"),s.value={deed_number:"",deed_type:"",title:"",deed_date:"",customer_id:"",description:""}}catch(e){e&&e.status===400&&(a.value=(i=e.response)==null?void 0:i.data),alert("Terjadi kesalahan saat menyimpan.")}};return S(f),(i,e)=>(o(),u("form",{onSubmit:V(y,["prevent"]),class:"space-y-4"},[t("div",null,[e[6]||(e[6]=t("label",{class:"block font-medium"},"Nomor Akta",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.deed_number=l),type:"text",class:"w-full mt-1 form-input",placeholder:"Nomor Akta"},null,512),[[v,s.value.deed_number]]),a.value.deed_number?(o(),u("span",N,r(a.value.deed_number),1)):p("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block font-medium"},"Tipe Akta",-1)),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.deed_type=l),class:"w-full mt-1 form-select"},[e[7]||(e[7]=t("option",{disabled:"",value:""},"Pilih tipe akta",-1)),(o(),u(w,null,g(d,(l,k)=>t("option",{key:k,value:k},r(l),9,M)),64))],512),[[A,s.value.deed_type]]),a.value.deed_type?(o(),u("span",$,r(a.value.deed_type),1)):p("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block font-medium"},"Judul",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.title=l),type:"text",class:"w-full mt-1 form-input",placeholder:"Judul akta (misal: Akta Jual Beli)"},null,512),[[v,s.value.title]]),a.value.title?(o(),u("span",D,r(a.value.title),1)):p("",!0)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block font-medium"},"Tanggal",-1)),m(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.deed_date=l),type:"date",class:"w-full mt-1 form-input"},null,512),[[v,s.value.deed_date]]),a.value.deed_date?(o(),u("span",E,r(a.value.deed_date),1)):p("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block font-medium"},"Klien",-1)),U(B,{data:n.value,modelValue:s.value.customer_id,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.customer_id=l)},null,8,["data","modelValue"]),a.value.customer_id?(o(),u("span",L,r(a.value.customer_id),1)):p("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block font-medium"},"Deskripsi",-1)),m(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.description=l),rows:"4",class:"w-full mt-1 form-textarea",placeholder:"Isi ringkas atau catatan akta..."},null,512),[[v,s.value.description]])]),e[13]||(e[13]=t("div",{class:"text-right"},[t("button",{type:"submit",class:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700"},"Simpan")],-1))],32))}},j=["value"],F={key:0,class:"text-red-600"},P={key:0,class:"text-red-600"},K={key:0,class:"text-red-600"},H={__name:"DeedUserForm",setup(c){const a=J().user,d=b({deed_type:"",title:"",deed_date:"",customer_id:a==null?void 0:a.customerId,description:""}),n=b({deed_type:"",title:"",deed_date:"",description:""}),f={JUAL_BELI:"Jual Beli",HAK_MILIK:"Sertifikat Hak Milik",PERJANJIAN:"Perjanjian"},y=async()=>{var i;try{await _.post("/deeds/byuser",d.value),console.log(d.value),alert("Akta berhasil disimpan!"),d.value={deed_type:"",title:"",deed_date:"",customer_id:a==null?void 0:a.customerId,description:""}}catch(e){e&&e.status===400&&(n.value=(i=e.response)==null?void 0:i.data),alert("Terjadi kesalahan saat menyimpan."+e)}};return(i,e)=>(o(),u("form",{onSubmit:V(y,["prevent"]),class:"space-y-4"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block font-medium"},"Tipe Akta",-1)),m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>d.value.deed_type=l),class:"w-full mt-1 form-select"},[e[4]||(e[4]=t("option",{disabled:"",value:""},"Pilih tipe akta",-1)),(o(),u(w,null,g(f,(l,k)=>t("option",{key:k,value:k},r(l),9,j)),64))],512),[[A,d.value.deed_type]]),n.value.deed_type?(o(),u("span",F,r(n.value.deed_type),1)):p("",!0)]),t("div",null,[e[6]||(e[6]=t("label",{class:"block font-medium"},"Judul",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>d.value.title=l),type:"text",class:"w-full mt-1 form-input",placeholder:"Judul akta (misal: Akta Jual Beli)"},null,512),[[v,d.value.title]]),n.value.title?(o(),u("span",P,r(n.value.title),1)):p("",!0)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block font-medium"},"Tanggal",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>d.value.deed_date=l),type:"date",class:"w-full mt-1 form-input"},null,512),[[v,d.value.deed_date]]),n.value.deed_date?(o(),u("span",K,r(n.value.deed_date),1)):p("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block font-medium"},"Deskripsi",-1)),m(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=l=>d.value.description=l),rows:"4",class:"w-full mt-1 form-textarea",placeholder:"Isi ringkas atau catatan akta..."},null,512),[[v,d.value.description]])]),e[9]||(e[9]=t("div",{class:"text-right"},[t("button",{type:"submit",class:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700"},"Simpan")],-1))],32))}},C={class:"max-w-3xl p-6 mx-auto space-y-4 bg-white shadow rounded-xl"},q={__name:"DeedForm",setup(c){const s=J();return(a,d)=>(o(),u("div",C,[d[0]||(d[0]=t("h2",{class:"text-xl font-bold"},"Form permintaan pembuatan Akta",-1)),I(s).isAdmin?(o(),x(T,{key:0})):(o(),x(H,{key:1}))]))}};export{q as default};
