import{l as A,r as b,b as U,c as u,s as w,a as t,v as m,e as p,y as v,t as r,x as g,F as V,k as J,h as I,d as c,o,z as S,A as x,f as B}from"./index-BhuyNmEO.js";import{_ as N}from"./CustomSelectModal.vue_vue_type_script_setup_true_lang-CoLU845u.js";const M={key:0,class:"text-red-600"},$=["value"],D={key:0,class:"text-red-600"},E={key:0,class:"text-red-600"},L={key:0,class:"text-red-600"},T={key:0,class:"text-red-600"},j=A({__name:"DeedAdminForm",setup(y){const s=b({deed_number:"",deed_type:"",title:"",deed_date:"",customer_id:"",description:""}),a=b({deed_number:"",deed_type:"",title:"",deed_date:"",customer_id:"",description:""}),d={JUAL_BELI:"Jual Beli",HAK_MILIK:"Sertifikat Hak Milik",PERJANJIAN:"Perjanjian"},i=b([]),f=async()=>{try{const n=await c.get("/clients/all");i.value=n.data}catch(n){console.error("Gagal memuat klien",n)}},_=async()=>{var n;try{await c.post("/deeds",s.value),alert("Akta berhasil disimpan!"),s.value={deed_number:"",deed_type:"",title:"",deed_date:"",customer_id:"",description:""}}catch(e){e&&e.status===400&&(a.value=(n=e.response)==null?void 0:n.data),alert("Terjadi kesalahan saat menyimpan.")}};return U(f),(n,e)=>(o(),u("form",{onSubmit:w(_,["prevent"]),class:"space-y-4"},[t("div",null,[e[6]||(e[6]=t("label",{class:"block font-medium"},"Nomor Akta",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.deed_number=l),type:"text",class:"form-input mt-1 w-full",placeholder:"Nomor Akta"},null,512),[[v,s.value.deed_number]]),a.value.deed_number?(o(),u("span",M,r(a.value.deed_number),1)):p("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block font-medium"},"Tipe Akta",-1)),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.deed_type=l),class:"form-select mt-1 w-full"},[e[7]||(e[7]=t("option",{disabled:"",value:""},"Pilih tipe akta",-1)),(o(),u(V,null,J(d,(l,k)=>t("option",{key:k,value:k},r(l),9,$)),64))],512),[[g,s.value.deed_type]]),a.value.deed_type?(o(),u("span",D,r(a.value.deed_type),1)):p("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block font-medium"},"Judul",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.title=l),type:"text",class:"form-input mt-1 w-full",placeholder:"Judul akta (misal: Akta Jual Beli)"},null,512),[[v,s.value.title]]),a.value.title?(o(),u("span",E,r(a.value.title),1)):p("",!0)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block font-medium"},"Tanggal",-1)),m(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.deed_date=l),type:"date",class:"form-input mt-1 w-full"},null,512),[[v,s.value.deed_date]]),a.value.deed_date?(o(),u("span",L,r(a.value.deed_date),1)):p("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block font-medium"},"Klien",-1)),I(N,{data:i.value,modelValue:s.value.customer_id,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.customer_id=l)},null,8,["data","modelValue"]),a.value.customer_id?(o(),u("span",T,r(a.value.customer_id),1)):p("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block font-medium"},"Deskripsi",-1)),m(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.description=l),rows:"4",class:"form-textarea mt-1 w-full",placeholder:"Isi ringkas atau catatan akta..."},null,512),[[v,s.value.description]])]),e[13]||(e[13]=t("div",{class:"text-right"},[t("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"},"Simpan")],-1))],32))}}),F=["value"],P={key:0,class:"text-red-600"},K={key:0,class:"text-red-600"},H={key:0,class:"text-red-600"},C={__name:"DeedUserForm",setup(y){const a=S().user,d=b({deed_type:"",title:"",deed_date:"",customer_id:a==null?void 0:a.customerId,description:""}),i=b({deed_type:"",title:"",deed_date:"",description:""}),f={JUAL_BELI:"Jual Beli",HAK_MILIK:"Sertifikat Hak Milik",PERJANJIAN:"Perjanjian"},_=async()=>{var n;try{await c.post("/deeds/byuser",d.value),console.log(d.value),alert("Akta berhasil disimpan!"),d.value={deed_type:"",title:"",deed_date:"",customer_id:a==null?void 0:a.customerId,description:""}}catch(e){e&&e.status===400&&(i.value=(n=e.response)==null?void 0:n.data),alert("Terjadi kesalahan saat menyimpan."+e)}};return(n,e)=>(o(),u("form",{onSubmit:w(_,["prevent"]),class:"space-y-4"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block font-medium"},"Tipe Akta",-1)),m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>d.value.deed_type=l),class:"w-full mt-1 form-select"},[e[4]||(e[4]=t("option",{disabled:"",value:""},"Pilih tipe akta",-1)),(o(),u(V,null,J(f,(l,k)=>t("option",{key:k,value:k},r(l),9,F)),64))],512),[[g,d.value.deed_type]]),i.value.deed_type?(o(),u("span",P,r(i.value.deed_type),1)):p("",!0)]),t("div",null,[e[6]||(e[6]=t("label",{class:"block font-medium"},"Judul",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>d.value.title=l),type:"text",class:"w-full mt-1 form-input",placeholder:"Judul akta (misal: Akta Jual Beli)"},null,512),[[v,d.value.title]]),i.value.title?(o(),u("span",K,r(i.value.title),1)):p("",!0)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block font-medium"},"Tanggal",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>d.value.deed_date=l),type:"date",class:"w-full mt-1 form-input"},null,512),[[v,d.value.deed_date]]),i.value.deed_date?(o(),u("span",H,r(i.value.deed_date),1)):p("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block font-medium"},"Deskripsi",-1)),m(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=l=>d.value.description=l),rows:"4",class:"w-full mt-1 form-textarea",placeholder:"Isi ringkas atau catatan akta..."},null,512),[[v,d.value.description]])]),e[9]||(e[9]=t("div",{class:"text-right"},[t("button",{type:"submit",class:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700"},"Simpan")],-1))],32))}},O={class:"max-w-3xl mx-auto bg-white rounded-xl shadow p-6 space-y-4"},G=A({__name:"DeedForm",setup(y){const s=S();return(a,d)=>(o(),u("div",O,[d[0]||(d[0]=t("h2",{class:"text-xl font-bold"},"Form permintaan pembuatan Akta",-1)),B(s).isAdmin?(o(),x(j,{key:0})):(o(),x(C,{key:1}))]))}});export{G as default};
