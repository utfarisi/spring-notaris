import{r as p,u as w,b as D,d as c,c as a,a as e,h as k,w as C,f as E,i as $,j as u,t as o,F as R,k as V,o as r,n as P,e as x}from"./index-BV_Du82z.js";import{_ as N}from"./PreviewDocument-iNgMLYxv.js";const A={class:"max-w-3xl p-6 mx-auto bg-white rounded shadow"},T={class:"flex items-center gap-3 mb-4"},U={class:"mb-4"},B={class:"w-full border table-auto"},J={class:"px-3 py-2"},I={class:"px-3 py-2"},L={class:"px-3 py-2"},O=["onClick"],S={class:"flex px-3 py-2 space-x-2"},F=["href"],M=["onClick"],j=["onClick"],q={__name:"DeedDocumentReview",setup(z){const g=p("http://localhost:8080"),v=w(),f=v.params.id,i=p({}),d=p([]),m=p("");D(async()=>{const[l,t]=await Promise.all([c.get(`/deeds/${f}`),c.get(`/deeds/${f}/documents`)]);i.value=l.data,d.value=t.data});const b=async(l,t)=>{try{await c.put(`/deed-documents/${l}/verify`,{status:t});const n=d.value.findIndex(s=>s.id===l);n!==-1&&(d.value[n].status=t)}catch(n){console.error("Verifikasi gagal",n)}},y=l=>{const t=`${g.value}/${l.name}`;m.value=t},h=l=>({APPROVED:"text-green-600 font-semibold",REJECTED:"text-red-600 font-semibold",UPLOADED:"text-blue-600 font-semibold",MISSING:"text-gray-500 italic"})[l];return(l,t)=>{const n=$("router-link");return r(),a("div",A,[e("div",T,[t[2]||(t[2]=e("h2",{class:"w-4/5 mb-4 text-2xl font-bold"},"Verifikasi Dokumen Akta",-1)),k(n,{to:`/deeds/${E(v).params.id}`,class:"px-2 py-2 text-sm text-white bg-black rounded-md"},{default:C(()=>t[1]||(t[1]=[u(" Kembali ")])),_:1,__:[1]},8,["to"])]),e("div",U,[e("p",null,[t[3]||(t[3]=e("strong",null,"Nomor:",-1)),u(" "+o(i.value.number),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Judul:",-1)),u(" "+o(i.value.title),1)]),e("p",null,[t[5]||(t[5]=e("strong",null,"Jenis:",-1)),u(" "+o(i.value.deedType),1)]),e("p",null,[t[6]||(t[6]=e("strong",null,"Tanggal:",-1)),u(" "+o(i.value.deedDate),1)])]),e("table",B,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"text-left bg-gray-100"},[e("th",{class:"px-3 py-2"},"Nama Dokumen"),e("th",{class:"px-3 py-2"},"Status"),e("th",{class:"px-3 py-2"},"Image"),e("th",{class:"px-3 py-2"},"Aksi")])],-1)),e("tbody",null,[(r(!0),a(R,null,V(d.value,s=>(r(),a("tr",{key:s.name,class:"border-t"},[e("td",J,o(s.name),1),e("td",I,[e("span",{class:P(h(s.status))},o(s.status),3)]),e("td",L,[e("button",{onClick:_=>y(s),class:"text-blue-600 underline"},"Lihat",8,O)]),e("td",S,[s.fileUrl?(r(),a("a",{key:0,href:s.fileUrl,target:"_blank",class:"text-blue-600 hover:underline"}," Lihat ",8,F)):x("",!0),s.status!=="APPROVED"?(r(),a("button",{key:1,onClick:_=>b(s.id,"APPROVED"),class:"text-green-600 hover:underline"}," ✔ ",8,M)):x("",!0),s.status!=="REJECTED"?(r(),a("button",{key:2,onClick:_=>b(s.id,"REJECTED"),class:"text-red-600 hover:underline"}," ✘ ",8,j)):x("",!0)])]))),128))])]),k(N,{"preview-url":m.value,onClose:t[0]||(t[0]=s=>m.value="")},null,8,["preview-url"])])}}};export{q as default};
