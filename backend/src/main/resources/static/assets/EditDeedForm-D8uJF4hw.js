import{h as g,r as p,b as A,d as v,u as w,c as f,a as t,v as r,y as n,t as d,x as N,F as V,l as P,i as c,w as D,f as I,j as T,s as B,k as E,g as R,o as _}from"./index-DITnirLC.js";import{_ as U}from"./CustomSelectModal.vue_vue_type_script_setup_true_lang-BlVEPJXn.js";const J={class:"max-w-2xl mx-auto bg-white rounded-xl shadow p-6 space-y-4"},S={if:"error.deed_number",class:"text-red-600"},G=["value"],H={if:"error.deed_type",class:"text-red-600"},K={if:"error.title",class:"text-red-600"},M={if:"error.deed_date",class:"text-red-600"},W={if:"error.customer_id",class:"text-red-600"},j={class:"text-right"},$=g({__name:"EditDeedForm",setup(C){const u=w(),x=R(),a=p({id:0,deed_number:"",deed_type:"",title:"",description:"",deed_date:"",customer_id:""}),s=p({deed_number:"",deed_type:"",title:"",description:"",deed_date:"",customer_id:""}),k={JUAL_BELI:"Jual Beli",HIBAH:"Hibah",PERJANJIAN:"Perjanjian",WASIAT:"Wasiat",PENDIRIAN_PT:"Pendirian PT",PERUBAHAN_ANGGARAN:"Perubahan Anggaran Dasar",KETERANGAN_WARIS:"Keterangan Waris"},m=p([]);A(async()=>{try{const o=await v.get("/clients/all");m.value=o.data,console.log(m.value)}catch(o){console.error("Gagal memuat klien",o)}const e=(await v.get(`/deeds/${u.params.id}`)).data;a.value={id:e.id,deed_number:e.number??"",customer_id:e.customerId,deed_type:e.deedType,title:e.title,description:e.description,deed_date:e.deedDate}});const y=async()=>{var i;try{await v.put(`/deeds/${u.params.id}`,a.value),x.push({name:"akta"})}catch(e){console.error("Gagal memperbaharui akta:",e),e.status==400&&(s.value=(i=e.response)==null?void 0:i.data,console.log("fields ",s.value))}};return(i,e)=>{const o=T("router-link");return _(),f("div",J,[e[15]||(e[15]=t("h2",{class:"text-xl font-bold"},"Perbaharui Akta",-1)),t("form",{onSubmit:B(y,["prevent"]),class:"space-y-4"},[t("div",null,[e[6]||(e[6]=t("label",{class:"block font-medium"},"Nomor",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.deed_number=l),type:"text",class:"form-input mt-1 w-full",placeholder:"Nomor"},null,512),[[n,a.value.deed_number]]),t("span",S,d(s.value.deed_number),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block font-medium"},"Tipe Akta",-1)),r(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.deed_type=l),class:"form-select mt-1 w-full"},[e[7]||(e[7]=t("option",{disabled:"",value:""},"Pilih tipe akta",-1)),(_(),f(V,null,P(k,(l,b)=>t("option",{key:b,value:b},d(l),9,G)),64))],512),[[N,a.value.deed_type]]),t("span",H,d(s.value.deed_type),1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block font-medium"},"Judul",-1)),r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.title=l),type:"text",class:"form-input mt-1 w-full",placeholder:"Judul akta (misal: Akta Jual Beli)"},null,512),[[n,a.value.title]]),t("span",K,d(s.value.title),1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block font-medium"},"Tanggal",-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.deed_date=l),type:"date",class:"form-input mt-1 w-full"},null,512),[[n,a.value.deed_date]]),t("span",M,d(s.value.deed_date),1)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block font-medium"},"Klien",-1)),c(U,{data:m.value,modelValue:a.value.customer_id,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.customer_id=l)},null,8,["data","modelValue"]),t("span",W,d(s.value.customer_id),1)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block font-medium"},"Deskripsi",-1)),r(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.description=l),rows:"4",class:"form-textarea mt-1 w-full",placeholder:"Isi ringkas atau catatan akta..."},null,512),[[n,a.value.description]])]),t("div",j,[c(o,{to:{name:"DeedDetail",params:I(u).params.id},class:"px-4 py-2 rounded m-2 bg-black text-white"},{default:D(()=>e[13]||(e[13]=[E("Kembali")])),_:1,__:[13]},8,["to"]),e[14]||(e[14]=t("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"},"Simpan",-1))])],32)])}}});export{$ as default};
